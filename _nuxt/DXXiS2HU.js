import{d as j,r as p,k as I,o as J,y as l,z as o,A as t,I as P,J as k,K as w,F as _,G as C,B as i,E as c,L as N}from"./WwBQ3dn_.js";const $={class:"p-6 max-w-6xl mx-auto font-sans"},R={class:"mb-6 bg-white shadow-md rounded-xl p-4 flex flex-col md:flex-row md:items-center gap-4"},V={class:"mb-6 bg-white shadow-md rounded-xl p-4 flex flex-col md:flex-row md:items-center gap-4"},D={key:0,class:"text-center py-12 text-gray-500 text-lg"},F={key:1,class:"results grid gap-6 sm:grid-cols-1 md:grid-cols-2"},U={key:0,class:"text-gray-500 text-center col-span-full"},B={key:1,class:"text-gray-500 text-center col-span-full"},E=["href"],H={class:"font-semibold text-lg text-blue-700 mb-1"},O={key:2,class:"flex flex-wrap items-center gap-2 mt-6 justify-center"},q=["disabled"],z=["onClick"],G=["disabled"],W={class:"ml-3 text-sm text-gray-600 mt-2 md:mt-0"},Q=20,Z=j({__name:"index",setup(X){const v=p(""),b=p(""),h=p(""),x=p(!1),d=p([]),u=p([]),n=p({current:1,totalPages:1,total:0}),m=async()=>{x.value=!0,u.value=u.value||[],d.value=d.value||[];let s=[];b.value&&s.push(`nama_kabupaten=${encodeURIComponent(b.value)}`),v.value&&s.push(`nama_provinsi=${encodeURIComponent(v.value)}`);const e=`https://maganghub.kemnaker.go.id/be/v1/api/list/vacancies-aktif?order_by=jumlah_kuota&order_direction=DESC&page=${n.value.current}&limit=${Q}${s.length?"&"+s.join("&"):""}`;try{const r=await(await fetch(e)).json(),g=r?.meta?.pagination||{};n.value={current:g.current_page||1,totalPages:g.last_page||1,total:g.total||r.total||0},d.value=r.data||[],u.value=[...d.value]}catch(a){console.error(a)}finally{x.value=!1}},K=s=>{try{return JSON.parse(s||"[]").map(e=>e.title).join(", ")||"-"}catch{return"-"}},A=()=>{u.value=u.value||[],d.value=d.value||[];const s=h.value.trim().toLowerCase();if(!s){u.value=[...d.value];return}u.value=d.value.filter(e=>{try{return JSON.parse(e.program_studi||"[]").some(r=>r.title?.toLowerCase().includes(s))}catch{return!1}})},S=()=>{n.value.current>1&&(n.value.current--,m())},T=()=>{n.value.current<n.value.totalPages&&(n.value.current++,m())},M=s=>{n.value.current=s,m()},L=I(()=>{const e=[],{current:a,totalPages:r}=n.value,g=Math.max(1,a-2),f=Math.min(r,a+2);g>1&&(e.push(1),g>2&&e.push("..."));for(let y=g;y<=f;y++)e.push(y);return f<r&&(f<r-1&&e.push("..."),e.push(r)),e});return J(m),(s,e)=>(o(),l("main",$,[e[12]||(e[12]=t("header",{class:"mb-8 text-center"},[t("h1",{class:"text-4xl md:text-5xl font-bold text-gray-800 mb-2 drop-shadow-sm"}," Cari Lowongan Magang di Magang Hub Kemnaker "),t("h2",{class:"text-gray-600 mb-2 italic text-sm md:text-base"}," Website ini tidak memiliki hubungan dengan Magang Hub ataupun Kemnaker "),t("p",{class:"text-gray-500 text-sm md:text-base"}," Filter by provinsi, kabupaten/kota, program studi â€” query harus sesuai dengan kategori website MagangHub. Contoh Povinsi: DKI JAKARTA, Kabupaten/Kota: KOTA ADM. JAKARTA SELATAN, Program Studi: Psikologi ")],-1)),t("div",R,[e[3]||(e[3]=t("h3",{class:"font-semibold text-gray-700 md:w-48"},"Server-side filters (via API)",-1)),k(t("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>v.value=a),placeholder:"Provinsi",class:"border border-gray-300 px-3 py-2 rounded focus:ring-2 focus:ring-blue-400 focus:outline-none flex-1"},null,512),[[w,v.value,void 0,{trim:!0}]]),k(t("input",{"onUpdate:modelValue":e[1]||(e[1]=a=>b.value=a),placeholder:"Kabupaten/Kota",class:"border border-gray-300 px-3 py-2 rounded focus:ring-2 focus:ring-blue-400 focus:outline-none flex-1"},null,512),[[w,b.value,void 0,{trim:!0}]]),t("button",{onClick:m,class:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition"}," Search ")]),t("div",V,[e[4]||(e[4]=t("h3",{class:"font-semibold text-gray-700 md:w-48"},"Client-side filters (setelah API call)",-1)),k(t("input",{"onUpdate:modelValue":e[2]||(e[2]=a=>h.value=a),placeholder:"Program Studi (misal: Psikologi, Komunikasi)",class:"border border-gray-300 px-3 py-2 rounded focus:ring-2 focus:ring-green-400 focus:outline-none flex-1"},null,512),[[w,h.value,void 0,{trim:!0}]]),t("button",{onClick:A,class:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 transition"}," Apply Filter "),e[5]||(e[5]=t("span",{class:"text-gray-500 text-sm"},"Refresh manual",-1))]),x.value?(o(),l("div",D,"Loading...")):(o(),l("div",F,[(u.value||[]).length===0&&(d.value||[]).length>0?(o(),l("div",U," Tidak ada hasil yang cocok dengan filter Program Studi di halaman ini. Coba navigasikan ke halaman berikutnya. ")):(u.value||[]).length===0?(o(),l("div",B," Tidak ada hasil. ")):P("",!0),(o(!0),l(_,null,C(u.value,a=>(o(),l("div",{key:a.id_posisi,class:"bg-white rounded-xl shadow-md hover:shadow-lg transition overflow-hidden"},[t("a",{href:`https://maganghub.kemnaker.go.id/lowongan/view/${a.id_posisi}`,target:"_blank",rel:"noopener",class:"block p-4 hover:bg-gray-50 transition"},[t("h3",H,i(a.posisi||"-"),1),t("p",null,[e[6]||(e[6]=t("strong",null,"Perusahaan:",-1)),c(" "+i(a.perusahaan?.nama_perusahaan||"-"),1)]),t("p",null,[e[7]||(e[7]=t("strong",null,"Provinsi:",-1)),c(" "+i(a.perusahaan?.nama_provinsi||"-"),1)]),t("p",null,[e[8]||(e[8]=t("strong",null,"Kabupaten:",-1)),c(" "+i(a.perusahaan?.nama_kabupaten||"-"),1)]),t("p",null,[e[9]||(e[9]=t("strong",null,"Program Studi:",-1)),c(" "+i(K(a.program_studi)),1)]),t("p",null,[e[10]||(e[10]=t("strong",null,"Jumlah Kebutuhan:",-1)),c(" "+i(a.jumlah_kuota),1)]),t("p",null,[e[11]||(e[11]=t("strong",null,"Jumlah Pelamar:",-1)),c(" "+i(a.jumlah_terdaftar),1)])],8,E)]))),128))])),!x.value&&n.value.totalPages>1?(o(),l("div",O,[t("button",{onClick:S,disabled:n.value.current<=1,class:"px-3 py-1 border rounded disabled:opacity-50 hover:bg-gray-100 transition"}," Previous ",8,q),(o(!0),l(_,null,C(L.value,a=>(o(),l(_,null,[a!=="..."?(o(),l("button",{key:"page-"+a,onClick:r=>M(a),class:N(["px-3 py-1 border rounded transition",a===n.value.current?"bg-blue-600 text-white border-blue-600":"hover:bg-gray-100"])},i(a),11,z)):(o(),l("span",{key:"ellipsis-"+a,class:"px-2 text-gray-400"},"..."))],64))),256)),t("button",{onClick:T,disabled:n.value.current>=n.value.totalPages,class:"px-3 py-1 border rounded disabled:opacity-50 hover:bg-gray-100 transition"}," Next ",8,G),t("span",W," Page "+i(n.value.current)+" of "+i(n.value.totalPages)+" | Total: "+i(n.value.total),1)])):P("",!0)]))}});export{Z as default};
